!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._data=e,this._handleImageClick=s}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._cardElement.querySelector(".card__button"),this._trashBtn=this._cardElement.querySelector(".card__trash"),this._likeBtn.addEventListener("click",(()=>{this._handleLikeBtn()})),this._trashBtn.addEventListener("click",(()=>{this._handleTrashBtn()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_handleLikeBtn(){this._likeBtn.classList.toggle("card__button-active")}_handleTrashBtn(){this._cardElement.remove(),this._cardElement=null}getView(){return this._element=this._getTemplate(),this._cardImageElement=this._element.querySelector(".card__image"),this._element.querySelector(".card__description").textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._element}}new class{constructor(e){}getInitialCards(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"6cb22812-4a29-42d2-a923-560237bcb5ba"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.error(e)}))}getUserInfo(){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{headers:{authorization:"6cb22812-4a29-42d2-a923-560237bcb5ba"}})}updateUserInfo(){fetch("https://around-api.en.tripleten-services.com/v1/users/me",{method:"PATCH",headers:{authorization:"c6cb22812-4a29-42d2-a923-560237bcb5ba","Content-Type":"application/json"},body:JSON.stringify({name:"Marie SkÅ‚odowska Curie",about:"Physicist and Chemist"})})}addNewCard(){}deleteCard(){}toggleLikeBtn(){}updateProfileImage(){}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6cb22812-4a29-42d2-a923-560237bcb5ba","Content-Type":"application/json"}});class t{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._errorList=e.errorList}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return this._inputElementsArray=Array.from(this._inputEls),this._inputElementsArray.some((e=>!e.validity.valid))}toggleButtonstate(){this._hasInvalidInput()?this.disableSubmitButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=this._form.querySelectorAll(this._inputSelector),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonstate()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this.toggleButtonstate()}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}}class s{constructor(e){this._popupSelector=e,this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_clickOverlay(e){e.target===this._popupElement&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{this._clickOverlay(e)})),this._closeBtn=this._popupElement.querySelector(".modal__close"),this._closeBtn.addEventListener("click",(()=>{this.close()}))}}class n extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputEls=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){return this._inputObj={},this._inputEls.forEach((e=>{this._inputObj[e.id]=e.value})),this._inputObj}reset(){this._popupForm.reset()}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}const i=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],r=document.querySelectorAll(".modal__form"),o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",errorList:".modal__error"},a="modal-title-input",l=(document.getElementById(a),"modal-description-input"),c=(document.getElementById(l),"#card-template"),u=document.querySelector("#profile-edit-button"),d=document.querySelector(".profile__add-button"),h={};function m(t){return new e(t,c,_).getView()}function _(e){let{name:t,link:s}=e;p.open({name:t,link:s})}const p=new class extends s{constructor(e){super(e),this._picTitle=this._popupElement.querySelector("#open-pic-title"),this._image=this._popupElement.querySelector("#open-pic-image")}open(e){let{name:t,link:s}=e;this._picTitle.textContent=t,this._image.src=s,this._image.alt=t,super.open()}}("#open-pic-modal"),E=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s)}getUserInfo(){return{title:this._nameEl.innerText,description:this._jobEl.innerText}}setUserInfo(e,t){this._nameEl.innerText=e,this._jobEl.innerText=t}}({nameSelector:"#js-profile-name",jobSelector:"#js-profile-description"}),b=new n("#profile-add-card-modal",(function(e){b.close();const t=m({name:e["modal-image-title-input"],link:e["modal-link-input"]});v.addItem(t),h["add-card-form"].disableSubmitButton(),b.reset()})),g=new n("#profile-edit-modal",(function(e){E.setUserInfo(e[a],e[l]),g.close()})),v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderedItems=s,this._renderer=n,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}addInitialItem(e){this._container.append(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({items:i,renderer:e=>{const t=m(e);v.addInitialItem(t)}},".cards__list");d.addEventListener("click",(()=>{b.open()})),u.addEventListener("click",(()=>{g.open(),function(){const e=E.getUserInfo();g.setInputValues(e)}()})),v.renderItems(i),(e=>{e.forEach((e=>{const s=new t(o,e);return s.enableValidation(),h[e.getAttribute("id")]=s,h}))})(r),b.setEventListeners(),g.setEventListeners(),p.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2hCLE1BQU1DLEVBQWdCLElBQUlsSCxFQUFjQyxFQUFVZ0gsR0FJbEQsT0FIQUMsRUFBYzNFLG1CQUNkcUMsRUFBZXFDLEVBQUtFLGFBQWEsT0FBU0QsRUFFbkN0QyxDQUFjLEdBQ3JCLEVBZ0NKckMsQ0FBaUI2QixHQUNqQnlCLEVBQWF2QyxvQkFDYjRDLEVBQVU1QyxvQkFDVjBCLEVBQVUxQixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKTtcbiAgICB0aGlzLl90cmFzaEJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ0bigpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RyYXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUcmFzaEJ0bigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XG4gICAgfSk7XG4gIH1cbiAgX2hhbmRsZUxpa2VCdG4oKSB7XG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fYnV0dG9uLWFjdGl2ZVwiKTtcbiAgfVxuICBfaGFuZGxlVHJhc2hCdG4oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZXNjcmlwdGlvblwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzXCIsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCI2Y2IyMjgxMi00YTI5LTQyZDItYTkyMy01NjAyMzdiY2I1YmFcIixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWVcIiwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjZjYjIyODEyLTRhMjktNDJkMi1hOTIzLTU2MDIzN2JjYjViYVwiLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuICB1cGRhdGVVc2VySW5mbygpIHtcbiAgICBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL3VzZXJzL21lXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcImM2Y2IyMjgxMi00YTI5LTQyZDItYTkyMy01NjAyMzdiY2I1YmFcIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBcIk1hcmllIFNrxYJvZG93c2thIEN1cmllXCIsXG4gICAgICAgIGFib3V0OiBcIlBoeXNpY2lzdCBhbmQgQ2hlbWlzdFwiLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cbiAgYWRkTmV3Q2FyZCgpIHt9XG4gIGRlbGV0ZUNhcmQoKSB7fVxuICB0b2dnbGVMaWtlQnRuKCkge31cbiAgdXBkYXRlUHJvZmlsZUltYWdlKCkge31cbn1cblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNmNiMjI4MTItNGEyOS00MmQyLWE5MjMtNTYwMjM3YmNiNWJhXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JMaXN0ID0gc2V0dGluZ3MuZXJyb3JMaXN0O1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5faW5wdXRFbHMpO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzQXJyYXkuc29tZSgoaW5wdXRFbCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIHRvZ2dsZUJ1dHRvbnN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbnN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uc3RhdGUoKTtcbiAgfVxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBfY2xpY2tPdmVybGF5KGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICB0aGlzLl9jbGlja092ZXJsYXkoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRFbHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0T2JqID0ge307XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRPYmpbaW5wdXRFbC5pZF0gPSBpbnB1dEVsLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dE9iajtcbiAgfVxuICByZXNldCgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuICAvL3snI2lkMXNvbWV0aGluZyc6bW9kYWxfX2lucHV0LnZhbHVlLCcjaWQxc29tZXRoaW5nJzptb2RhbF9faW5wdXQudmFsdWV9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqVGhlIGluZGV4LmpzIGZpbGUgbXVzdCBjb250YWluIG9ubHkgdGhlIGNvZGUgZm9yIHNlbGVjdGluZyBlbGVtZW50cywgY3JlYXRpbmcgY2xhc3MgaW5zdGFuY2VzLCBhbmQgYWRkaW5nIHNwZWNpZmljIGV2ZW50IGxpc3RlbmVycy4gT3RoZXIgY29kZSwgc3VjaCBhcyB0aGUgYXJyYXkgb2YgaW5pdGlhbCBjYXJkcyBhbmQgYW55IGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB5b3UgYXJlIHVzaW5nLCBzaG91bGQgYmUgbW92ZWQgdG8gYSBzZXBhcmF0ZSB1dGlscy9jb25zdGFudHMuanMgZmlsZSBhbmQgaW1wb3J0ZWQgaW50byBpbmRleC5qcyAqL1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5leHBvcnQgY29uc3QgY2FyZFdyYXBwZXJTZWxlY3RvciA9IFwiLmNhcmRzX19saXN0XCI7XG5cbmV4cG9ydCBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZVwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG4gIGVycm9yTGlzdDogXCIubW9kYWxfX2Vycm9yXCIsXG59O1xuZXhwb3J0IGNvbnN0IG5hbWVTZWxlY3RvciA9IFwiI2pzLXByb2ZpbGUtbmFtZVwiO1xuZXhwb3J0IGNvbnN0IGpvYlNlbGVjdG9yID0gXCIjanMtcHJvZmlsZS1kZXNjcmlwdGlvblwiO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cFNlbGVjdG9yID0gXCIjcHJvZmlsZS1hZGQtY2FyZC1tb2RhbFwiO1xuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cFNlbGVjdG9yID0gXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCI7XG5leHBvcnQgY29uc3QgZWRpdElucHV0VGl0bGVJZCA9IFwibW9kYWwtdGl0bGUtaW5wdXRcIjtcbmV4cG9ydCBjb25zdCBlZGl0SW5wdXRUaXRsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWRpdElucHV0VGl0bGVJZCk7XG5leHBvcnQgY29uc3QgZWRpdElucHV0RGVzY3JpcHRpb25JZCA9IFwibW9kYWwtZGVzY3JpcHRpb24taW5wdXRcIjtcbmV4cG9ydCBjb25zdCBlZGl0SW5wdXREZXNjcmlwdGlvbkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gIGVkaXRJbnB1dERlc2NyaXB0aW9uSWRcbik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZElucHV0VGl0bGVJZCA9IFwibW9kYWwtaW1hZ2UtdGl0bGUtaW5wdXRcIjtcbmV4cG9ydCBjb25zdCBhZGRDYXJkSW5wdXRMaW5rSWQgPSBcIm1vZGFsLWxpbmstaW5wdXRcIjtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybUlkID0gXCJhZGQtY2FyZC1mb3JtXCI7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IHBpY1BvcHVwU2VsZWN0b3IgPSBcIiNvcGVuLXBpYy1tb2RhbFwiO1xuZXhwb3J0IGNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgc2V0dGluZ3MsXG4gIGZvcm1WYWxpZGF0b3JzLFxuICBwaWNQb3B1cFNlbGVjdG9yLFxuICBwcm9maWxlRWRpdEJ0bixcbiAgYWRkQ2FyZEJ0bixcbiAgZm9ybUxpc3QsXG4gIGFkZENhcmRJbnB1dFRpdGxlSWQsXG4gIGFkZENhcmRJbnB1dExpbmtJZCxcbiAgY2FyZFRlbXBTZWxlY3RvcixcbiAgYWRkQ2FyZEZvcm1JZCxcbiAgZWRpdElucHV0VGl0bGVJZCxcbiAgZWRpdElucHV0RGVzY3JpcHRpb25JZCxcbiAgYWRkQ2FyZFBvcHVwU2VsZWN0b3IsXG4gIGVkaXRQb3B1cFNlbGVjdG9yLFxuICBuYW1lU2VsZWN0b3IsXG4gIGpvYlNlbGVjdG9yLFxuICBpbml0aWFsQ2FyZHMsXG4gIGNhcmRXcmFwcGVyU2VsZWN0b3IsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG4vLyBoYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVBc3NpZ25FZGl0SW5wdXQoKSB7XG4gIGNvbnN0IHVzZXJQcm9maWxlRGF0YSA9IHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VyUHJvZmlsZURhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlU3VibWl0KGlucHV0T2JqKSB7XG4gIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKFxuICAgIGlucHV0T2JqW2VkaXRJbnB1dFRpdGxlSWRdLFxuICAgIGlucHV0T2JqW2VkaXRJbnB1dERlc2NyaXB0aW9uSWRdXG4gICk7XG4gIGVkaXRQb3B1cC5jbG9zZSgpO1xufVxuZnVuY3Rpb24gY3JlYXRDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChpdGVtLCBjYXJkVGVtcFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgY29uc3QgY2FyZEl0ZW0gPSBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XG4gIHJldHVybiBjYXJkSXRlbTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoaW5wdXRPYmopIHtcbiAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gIGNvbnN0IG5ld0NhcmQgPSBjcmVhdENhcmQoe1xuICAgIG5hbWU6IGlucHV0T2JqW2FkZENhcmRJbnB1dFRpdGxlSWRdLFxuICAgIGxpbms6IGlucHV0T2JqW2FkZENhcmRJbnB1dExpbmtJZF0sXG4gIH0pO1xuICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xuICBmb3JtVmFsaWRhdG9yc1thZGRDYXJkRm9ybUlkXS5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gIGFkZENhcmRQb3B1cC5yZXNldCgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHsgbmFtZSwgbGluayB9KSB7XG4gIGltYWdlSW5mby5vcGVuKHsgbmFtZSwgbGluayB9KTtcbn1cblxuLypmb3JtIHZhbGlkYXRpb24qL1xuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChmb3JtTGlzdCkgPT4ge1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XG4gICAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtKTtcbiAgICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtLmdldEF0dHJpYnV0ZShcImlkXCIpXSA9IGZvcm1WYWxpZGF0b3I7XG5cbiAgICByZXR1cm4gZm9ybVZhbGlkYXRvcnM7XG4gIH0pO1xufTtcblxuLy9lbGVtZW50c1xuY29uc3QgaW1hZ2VJbmZvID0gbmV3IFBvcHVwV2l0aEltYWdlKHBpY1BvcHVwU2VsZWN0b3IpO1xuY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlckluZm8oeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pO1xuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIGFkZENhcmRQb3B1cFNlbGVjdG9yLFxuICBoYW5kbGVBZGRDYXJkU3VibWl0XG4pO1xuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdFBvcHVwU2VsZWN0b3IsIGhhbmRsZVByb2ZpbGVTdWJtaXQpO1xuY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkSXRlbSA9IGNyZWF0Q2FyZChpdGVtKTtcbiAgICAgIGNhcmRMaXN0LmFkZEluaXRpYWxJdGVtKGNhcmRJdGVtKTtcbiAgICB9LFxuICB9LFxuICBjYXJkV3JhcHBlclNlbGVjdG9yXG4pO1xuXG4vL2Z1bmN0aW9uIGNhbGxzIGFuZCBldmVudCBsaXN0ZW5lcnNcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFBvcHVwLm9wZW4oKTtcbiAgaGFuZGxlQXNzaWduRWRpdElucHV0KCk7XG59KTtcblxuY2FyZExpc3QucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcbmVuYWJsZVZhbGlkYXRpb24oZm9ybUxpc3QpO1xuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlSW5mby5zZXRFdmVudExpc3RlbmVycygpO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIC8vIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIC8vIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX3BpY1RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3Blbi1waWMtdGl0bGVcIik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNvcGVuLXBpYy1pbWFnZVwiKTtcbiAgfVxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fcGljVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdGl0bGU6IHRoaXMuX25hbWVFbC5pbm5lclRleHQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fam9iRWwuaW5uZXJUZXh0LFxuICAgIH07XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lRWwuaW5uZXJUZXh0ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbC5pbm5lclRleHQgPSBqb2I7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG4gIGFkZEluaXRpYWxJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2RhdGEiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ0biIsIl90cmFzaEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ0biIsIl9oYW5kbGVUcmFzaEJ0biIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2V0VmlldyIsIl9lbGVtZW50IiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJvcHRpb25zIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRVc2VySW5mbyIsInVwZGF0ZVVzZXJJbmZvIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZE5ld0NhcmQiLCJkZWxldGVDYXJkIiwidG9nZ2xlTGlrZUJ0biIsInVwZGF0ZVByb2ZpbGVJbWFnZSIsImJhc2VVcmwiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Vycm9yTGlzdCIsImVycm9yTGlzdCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHNBcnJheSIsIkFycmF5IiwiZnJvbSIsIl9pbnB1dEVscyIsInNvbWUiLCJ0b2dnbGVCdXR0b25zdGF0ZSIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIl9jbGlja092ZXJsYXkiLCJ0YXJnZXQiLCJzZXRFdmVudExpc3RlbmVycyIsIl9jbG9zZUJ0biIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRPYmoiLCJ2YWx1ZSIsInJlc2V0Iiwic2V0SW5wdXRWYWx1ZXMiLCJpbnB1dCIsImluaXRpYWxDYXJkcyIsImZvcm1MaXN0IiwiZm9ybVNlbGVjdG9yIiwiZWRpdElucHV0VGl0bGVJZCIsImVkaXRJbnB1dERlc2NyaXB0aW9uSWQiLCJnZXRFbGVtZW50QnlJZCIsImNhcmRUZW1wU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ0biIsImFkZENhcmRCdG4iLCJmb3JtVmFsaWRhdG9ycyIsImNyZWF0Q2FyZCIsIml0ZW0iLCJfcmVmIiwiaW1hZ2VJbmZvIiwiX3BpY1RpdGxlIiwiX2ltYWdlIiwidXNlclByb2ZpbGUiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWwiLCJfam9iRWwiLCJ0aXRsZSIsImlubmVyVGV4dCIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJqb2IiLCJhZGRDYXJkUG9wdXAiLCJpbnB1dE9iaiIsIm5ld0NhcmQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJlZGl0UG9wdXAiLCJjb250YWluZXJTbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYWRkSW5pdGlhbEl0ZW0iLCJhcHBlbmQiLCJyZW5kZXJJdGVtcyIsImNhcmRJdGVtIiwidXNlclByb2ZpbGVEYXRhIiwiaGFuZGxlQXNzaWduRWRpdElucHV0IiwiZm9ybSIsImZvcm1WYWxpZGF0b3IiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9