!function(){"use strict";class e{constructor(e,t,s,i,r){this._name=e.name,this._link=e.link,this.id=e._id,this._cardSelector=t,this._data=e,this._handleImageClick=s,this._handleDeleteClick=i,this._handleLikeClick=r,this._isLiked=e.isLiked}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeBtn=this._cardElement.querySelector(".card__button"),this._trashBtn=this._cardElement.querySelector(".card__trash"),this._likeBtn.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._trashBtn.addEventListener("click",(()=>{this._handleDeleteClick(this)})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}deleteCard(){this._cardElement.remove()}setIsLiked(e){this._isLiked=e,this._renderLikes()}isLiked(){return this._isLiked}_renderLikes(){this._isLiked?this._likeBtn.classList.add("card__button-active"):this._likeBtn.classList.remove("card__button-active")}getView(){return this._element=this._getTemplate(),this._cardImageElement=this._element.querySelector(".card__image"),this._element.querySelector(".card__description").textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._renderLikes(),this._element}}class t{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._errorList=e.errorList,this._formGetReset=t.querySelector("#profile-edit-form")}_showInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_hideInputError(e){this._errorMessageEl=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return this._inputElementsArray=Array.from(this._inputEls),this._inputElementsArray.some((e=>!e.validity.valid))}toggleButtonstate(){this._hasInvalidInput()?this.disableSubmitButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputEls=this._form.querySelectorAll(this._inputSelector),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonstate()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this.toggleButtonstate(),console.log(resetVa)}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}}class s{constructor(e){this._popupSelector=e,this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_clickOverlay(e){e.target===this._popupElement&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{this._clickOverlay(e)})),this._closeBtn=this._popupElement.querySelector(".modal__close"),this._closeBtn.addEventListener("click",(()=>{this.close()}))}}class i extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputEls=this._popupForm.querySelectorAll(".modal__input"),this._submitBtn=this._popupElement.querySelector(".modal__save"),this._buttonText=this._submitBtn.textContent}_getInputValues(){return this._inputObj={},this._inputEls.forEach((e=>{this._inputObj[e.id]=e.value})),this._inputObj}reset(){this._popupForm.reset()}setInputValues(e){this._inputEls.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}showUploadingState(){this._submitBtn.innerText="Saving"}showUploaded(){this._submitBtn.innerText=this._buttonText}}class r{constructor(e,t){let{items:s,renderer:i}=e;this._renderedItems=s,this._renderer=i,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}addInitialItem(e){this._container.append(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}const n=document.querySelectorAll(".modal__form"),o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",errorList:".modal__error"},a="modal-title-input",l=(document.getElementById(a),"modal-description-input"),d=(document.getElementById(l),"add-card-form"),h="change-profile-pic-form",c="profile-edit-form",u=(document.getElementById(c),"#card-template"),_=document.querySelector("#profile-edit-button"),m=document.querySelector(".profile__add-button"),p={},E=(document.querySelector("#delete-card-modal"),document.querySelectorAll(".card__trash"),document.querySelector("#profile-avatar-edit-button"));let b;document.querySelector("#change-profile-pic-modal"),document.querySelector("#delete-card-modal"),document.querySelector("#delete-card-submit-btn"),document.querySelector(".profile__photo"),document.querySelectorAll(".modal__save");const v=new class extends s{constructor(e){super(e),this._submitBtn=this._popupElement.querySelector(".modal__save"),this._btnText=this._submitBtn.textContent}setSubmitAction(e){this._handleFormSubmit=e}showLoading(){this._submitBtn.innerText="Loading"}showDeleted(){this._submitBtn.innerText=this._btnText}setEventListeners(){super.setEventListeners(),this._submitBtn.addEventListener("click",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}("#delete-card-modal"),f=new class extends s{constructor(e){super(e),this._picTitle=this._popupElement.querySelector("#open-pic-title"),this._image=this._popupElement.querySelector("#open-pic-image")}open(e){let{name:t,link:s}=e;this._picTitle.textContent=t,this._image.src=s,this._image.alt=t,super.open()}}("#open-pic-modal"),S=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this._nameEl=document.querySelector(t),this._jobEl=document.querySelector(s),this._avatarEl=document.querySelector(i)}getUserInfo(){return{title:this._nameEl.innerText,description:this._jobEl.innerText}}setUserInfo(e,t){this._nameEl.innerText=e,this._jobEl.innerText=t}setAvatar(e){this._avatarEl.src=e}}({nameSelector:"#js-profile-name",jobSelector:"#js-profile-description",avatarSelector:"#js-avatar"}),g=new i("#profile-add-card-modal",(function(e){const t=e["modal-image-title-input"],s=e["modal-link-input"];g.showUploadingState(),k.addNewCard({cardElementName:t,cardElementLink:s}).then((e=>{g.showUploaded();const t=I(e);b.addItem(t),p[d].disableSubmitButton(),g.close(),g.reset()})).catch((e=>{console.error(e)})).finally((()=>{g.showToUpload()}))})),L=new i("#profile-edit-modal",(function(e){const t=e[a],s=e[l];L.showUploadingState(),k.updateUserInfo({editFormNameInput:t,editFormAboutInput:s}).then((e=>{S.setUserInfo(e.name,e.about),L.close(),p[c].disableSubmitButton(),L.reset()})).catch((e=>{console.error(e)})).finally((()=>{L.showUploaded()}))})),y=new i("#change-profile-pic-modal",(function(e){y.showUploadingState();const t=e["modal-avatar-input"];k.updateProfileImage(t).then((e=>{console.log(e),S.setAvatar(e.avatar),y.close(),p[h].disableSubmitButton(),y.reset()})).catch((e=>{console.error(e)})).finally((()=>{y.showUploaded()}))})),k=new class{constructor(e){let{baseUrl:t,headers:s}=e;this.baseUrl=t,this._headers=s}getResult(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getInitialCards(){return fetch(`${this.baseUrl}/cards`,{headers:this._headers}).then(this.getResult)}getUserInfo(){return fetch(`${this.baseUrl}/users/me`,{headers:this._headers}).then(this.getResult)}updateUserInfo(e){let{editFormNameInput:t,editFormAboutInput:s}=e;return fetch(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this.getResult)}addNewCard(e){let{cardElementName:t,cardElementLink:s}=e;return fetch(`${this.baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this.getResult)}deleteCard(e){return fetch(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this.getResult)}likeCard(e){return fetch(`${this.baseUrl}/cards/${e.id}/likes`,{method:"PUT",headers:this._headers}).then(this.getResult)}unlikeCard(e){return fetch(`${this.baseUrl}/cards/${e.id}/likes`,{method:"DELETE",headers:this._headers}).then(this.getResult)}updateProfileImage(e){return fetch(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this.getResult)}getCardAndUserInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"62fbc1de-42d6-41b7-8bb5-5b0736932e96","Content-Type":"application/json"}});function I(t){return new e(t,u,C,q,B).getView()}function C(e){let{name:t,link:s}=e;f.open({name:t,link:s})}function B(e){(e.isLiked()?k.unlikeCard(e):k.likeCard(e)).then((t=>{e.setIsLiked(t.isLiked)})).catch((e=>{console.error(e)}))}function q(e){v.open(),v.setSubmitAction((()=>{v.showLoading(),k.deleteCard(e.id).then((t=>{v.close(),e.deleteCard()})).catch((e=>{console.error(e)})).finally((()=>{v.showDeleted()}))}))}k.getCardAndUserInfo().then((e=>{let[t,s]=e;b=new r({items:t,renderer:e=>{const t=I(e);b.addInitialItem(t)}},".cards__list"),b.renderItems(t);const i=s.name,n=s.about,o=s.avatar;S.setUserInfo(i,n),S.setAvatar(o)})).catch((e=>{console.error(e)})),m.addEventListener("click",(()=>{p[d].resetValidation(),p[d].disableSubmitButton(),g.reset(),g.open()})),_.addEventListener("click",(()=>{p[c].resetValidation(),p[c].disableSubmitButton(),L.reset(),L.open(),function(){const e=S.getUserInfo();L.setInputValues(e)}()})),E.addEventListener("click",(()=>{y.reset(),p[h].resetValidation(),p[h].disableSubmitButton(),y.open()})),(e=>{e.forEach((e=>{const s=new t(o,e);return s.enableValidation(),p[e.getAttribute("id")]=s,p}))})(n),g.setEventListeners(),L.setEventListeners(),f.setEventListeners(),y.setEventListeners(),v.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ2hCLE1BQU1DLEVBQWdCLElBQUl0TCxFQUFjQyxFQUFVb0wsR0FHbEQsT0FGQUMsRUFBY2hKLG1CQUNkOEQsRUFBZWlGLEVBQUtFLGFBQWEsT0FBU0QsRUFDbkNsRixDQUFjLEdBQ3JCLEVBeUJKOUQsQ0FBaUJtRCxHQUNqQm1DLEVBQWFwRSxvQkFDYnFGLEVBQVVyRixvQkFDVm9ELEVBQVVwRCxvQkFDVjZGLEVBQWdCN0Ysb0JBQ2hCK0MsRUFBZ0IvQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuaWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcbiAgfVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvblwiKTtcbiAgICB0aGlzLl90cmFzaEJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RyYXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xuICAgIH0pO1xuICB9XG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cbiAgLy8gc2V0TGlrZUFjdGlvbigpIHtcbiAgLy8gICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tYWN0aXZlXCIpO1xuICAvLyAgIHRoaXMuaXNMaWtlZCA9ICF0aGlzLmlzTGlrZWQ7XG4gIC8vIH1cblxuICBzZXRJc0xpa2VkKGlzTGlrZWQpIHtcbiAgICAvLyBzZXQgaW5zdGFuY2UgdmFyaWFibGVcbiAgICB0aGlzLl9pc0xpa2VkID0gaXNMaWtlZDtcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcbiAgfVxuXG4gIF9yZW5kZXJMaWtlcygpIHtcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xuICAgICAgLy8gYWRkIGFjdGl2ZSBjbGFzcyB0byB0aGUgbGlrZSBidXR0b25cbiAgICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2J1dHRvbi1hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSB0aGUgbGlrZSBidXR0b25cbiAgICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2J1dHRvbi1hY3RpdmVcIik7XG4gICAgfVxuICB9XG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yTGlzdCA9IHNldHRpbmdzLmVycm9yTGlzdDtcbiAgICB0aGlzLl9mb3JtR2V0UmVzZXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1mb3JtXCIpO1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgfVxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHNBcnJheSA9IEFycmF5LmZyb20odGhpcy5faW5wdXRFbHMpO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzQXJyYXkuc29tZSgoaW5wdXRFbCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG4gIHRvZ2dsZUJ1dHRvbnN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbnN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uc3RhdGUoKTtcbiAgICBjb25zb2xlLmxvZyhyZXNldFZhKTtcbiAgfVxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBfY2xpY2tPdmVybGF5KGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICB0aGlzLl9jbGlja092ZXJsYXkoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRFbHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XG4gICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRPYmogPSB7fTtcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICB0aGlzLl9pbnB1dE9ialtpbnB1dEVsLmlkXSA9IGlucHV0RWwudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0T2JqO1xuICB9XG4gIHJlc2V0KCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG4gIHNob3dVcGxvYWRpbmdTdGF0ZSgpIHtcbiAgICB0aGlzLl9zdWJtaXRCdG4uaW5uZXJUZXh0ID0gXCJTYXZpbmdcIjtcbiAgfVxuICBzaG93VXBsb2FkZWQoKSB7XG4gICAgdGhpcy5fc3VibWl0QnRuLmlubmVyVGV4dCA9IHRoaXMuX2J1dHRvblRleHQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG4gIGFkZEluaXRpYWxJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlRoZSBpbmRleC5qcyBmaWxlIG11c3QgY29udGFpbiBvbmx5IHRoZSBjb2RlIGZvciBzZWxlY3RpbmcgZWxlbWVudHMsIGNyZWF0aW5nIGNsYXNzIGluc3RhbmNlcywgYW5kIGFkZGluZyBzcGVjaWZpYyBldmVudCBsaXN0ZW5lcnMuIE90aGVyIGNvZGUsIHN1Y2ggYXMgdGhlIGFycmF5IG9mIGluaXRpYWwgY2FyZHMgYW5kIGFueSBjb25maWd1cmF0aW9uIG9iamVjdHMgeW91IGFyZSB1c2luZywgc2hvdWxkIGJlIG1vdmVkIHRvIGEgc2VwYXJhdGUgdXRpbHMvY29uc3RhbnRzLmpzIGZpbGUgYW5kIGltcG9ydGVkIGludG8gaW5kZXguanMgKi9cblxuZXhwb3J0IGNvbnN0IGNhcmRXcmFwcGVyU2VsZWN0b3IgPSBcIi5jYXJkc19fbGlzdFwiO1xuZXhwb3J0IGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmVfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbiAgZXJyb3JMaXN0OiBcIi5tb2RhbF9fZXJyb3JcIixcbn07XG5leHBvcnQgY29uc3QgbmFtZVNlbGVjdG9yID0gXCIjanMtcHJvZmlsZS1uYW1lXCI7XG5leHBvcnQgY29uc3Qgam9iU2VsZWN0b3IgPSBcIiNqcy1wcm9maWxlLWRlc2NyaXB0aW9uXCI7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwU2VsZWN0b3IgPSBcIiNwcm9maWxlLWFkZC1jYXJkLW1vZGFsXCI7XG5leHBvcnQgY29uc3QgZWRpdFBvcHVwU2VsZWN0b3IgPSBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIjtcbmV4cG9ydCBjb25zdCBlZGl0SW5wdXRUaXRsZUlkID0gXCJtb2RhbC10aXRsZS1pbnB1dFwiO1xuZXhwb3J0IGNvbnN0IGVkaXRJbnB1dFRpdGxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlZGl0SW5wdXRUaXRsZUlkKTtcbmV4cG9ydCBjb25zdCBlZGl0SW5wdXREZXNjcmlwdGlvbklkID0gXCJtb2RhbC1kZXNjcmlwdGlvbi1pbnB1dFwiO1xuZXhwb3J0IGNvbnN0IGVkaXRJbnB1dERlc2NyaXB0aW9uRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgZWRpdElucHV0RGVzY3JpcHRpb25JZFxuKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkSW5wdXRUaXRsZUlkID0gXCJtb2RhbC1pbWFnZS10aXRsZS1pbnB1dFwiO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRJbnB1dExpbmtJZCA9IFwibW9kYWwtbGluay1pbnB1dFwiO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtSWQgPSBcImFkZC1jYXJkLWZvcm1cIjtcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtSWQgPSBcImNoYW5nZS1wcm9maWxlLXBpYy1mb3JtXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtSWQgPSBcInByb2ZpbGUtZWRpdC1mb3JtXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJvZmlsZUVkaXRGb3JtSWQpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wU2VsZWN0b3IgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwaWNQb3B1cFNlbGVjdG9yID0gXCIjb3Blbi1waWMtbW9kYWxcIjtcbmV4cG9ydCBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWNhcmQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgdHJhc2hCdG5BcnIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNhcmRfX3RyYXNoXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWF2YXRhci1lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2NoYW5nZS1wcm9maWxlLXBpYy1tb2RhbFwiXG4pO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRTZWxlY3RvciA9IFwiI2NoYW5nZS1wcm9maWxlLXBpYy1tb2RhbFwiO1xuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRTZWxlY3RvciA9IFwiI2RlbGV0ZS1jYXJkLW1vZGFsXCI7XG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY2FyZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkU3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjZGVsZXRlLWNhcmQtc3VibWl0LWJ0blwiXG4pO1xuZXhwb3J0IGNvbnN0IGF2YXRhckxpbmtJbnB1dElkID0gXCJtb2RhbC1hdmF0YXItaW5wdXRcIjtcbmV4cG9ydCBjb25zdCBhdmF0YXJJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Bob3RvXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhclNlbGVjdG9yID0gXCIjanMtYXZhdGFyXCI7XG5leHBvcnQgY29uc3Qgc2F2ZUJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19zYXZlXCIpO1xuIiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7XG4gIGF2YXRhckVkaXRCdG4sXG4gIHByb2ZpbGVFZGl0Rm9ybSxcbiAgc2F2ZUJ0bnMsXG4gIGF2YXRhckZvcm1JZCxcbiAgYXZhdGFyU2VsZWN0b3IsXG4gIGF2YXRhckltZyxcbiAgYXZhdGFyTGlua0lucHV0SWQsXG4gIHByb2ZpbGVFZGl0Rm9ybUlkLFxuICBkZWxldGVDYXJkRWwsXG4gIGRlbGV0ZUNhcmRTdWJtaXRCdG4sXG4gIGRlbGV0ZUNhcmRTZWxlY3RvcixcbiAgYXZhdGFyRWRpdFNlbGVjdG9yLFxuICBzZXR0aW5ncyxcbiAgZm9ybVZhbGlkYXRvcnMsXG4gIHBpY1BvcHVwU2VsZWN0b3IsXG4gIHByb2ZpbGVFZGl0QnRuLFxuICBhZGRDYXJkQnRuLFxuICBmb3JtTGlzdCxcbiAgYWRkQ2FyZElucHV0VGl0bGVJZCxcbiAgYWRkQ2FyZElucHV0TGlua0lkLFxuICBjYXJkVGVtcFNlbGVjdG9yLFxuICBhZGRDYXJkRm9ybUlkLFxuICBlZGl0SW5wdXRUaXRsZUlkLFxuICBlZGl0SW5wdXREZXNjcmlwdGlvbklkLFxuICBhZGRDYXJkUG9wdXBTZWxlY3RvcixcbiAgZWRpdFBvcHVwU2VsZWN0b3IsXG4gIG5hbWVTZWxlY3RvcixcbiAgam9iU2VsZWN0b3IsXG4gIGNhcmRXcmFwcGVyU2VsZWN0b3IsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcblxuLy8gZWxlbWVudHNcbmxldCBjYXJkTGlzdDtcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oZGVsZXRlQ2FyZFNlbGVjdG9yKTtcbmNvbnN0IGltYWdlSW5mbyA9IG5ldyBQb3B1cFdpdGhJbWFnZShwaWNQb3B1cFNlbGVjdG9yKTtcbmNvbnN0IHVzZXJQcm9maWxlID0gbmV3IFVzZXJJbmZvKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSk7XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgYWRkQ2FyZFBvcHVwU2VsZWN0b3IsXG4gIGhhbmRsZUFkZENhcmRTdWJtaXRcbik7XG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0UG9wdXBTZWxlY3RvciwgaGFuZGxlUHJvZmlsZVN1Ym1pdCk7XG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgYXZhdGFyRWRpdFNlbGVjdG9yLFxuICBoYW5kbGVBdmF0YXJTdWJtaXRcbik7XG5cbi8vIGFwaVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNjJmYmMxZGUtNDJkNi00MWI3LThiYjUtNWIwNzM2OTMyZTk2XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8gcHJvbWlzZS5hbGxcbmFwaVxuICAuZ2V0Q2FyZEFuZFVzZXJJbmZvKClcbiAgLnRoZW4oKFtzZXJ2ZXJDYXJkTGlzdCwgc2VydmVyVXNlckluZm9dKSA9PiB7XG4gICAgLy8gbG9hZCBjYXJkcyBmcm9tIHNlcnZlclxuICAgIGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBzZXJ2ZXJDYXJkTGlzdCxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FyZEl0ZW0gPSBjcmVhdENhcmQoaXRlbSk7XG4gICAgICAgICAgY2FyZExpc3QuYWRkSW5pdGlhbEl0ZW0oY2FyZEl0ZW0pO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGNhcmRXcmFwcGVyU2VsZWN0b3JcbiAgICApO1xuICAgIC8vIGFkZCBpbml0aWFsIGNhcmRzIHRvIERPTVxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKHNlcnZlckNhcmRMaXN0KTtcbiAgICAvL2xpa2VCdG4gYWN0aXZlIGlmIGlzTGlrZWQ9dHJ1ZVxuXG4gICAgLy8gbG9hZCB1c2VyIGJpbyBmcm9tIHNlcnZlclxuICAgIGNvbnN0IG5hbWUgPSBzZXJ2ZXJVc2VySW5mby5uYW1lO1xuICAgIGNvbnN0IGpvYiA9IHNlcnZlclVzZXJJbmZvLmFib3V0O1xuICAgIGNvbnN0IGF2YXRhciA9IHNlcnZlclVzZXJJbmZvLmF2YXRhcjtcbiAgICAvLyBhZGQgdXNlciBiaW8gdG8gRE9NXG4gICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8obmFtZSwgam9iKTtcbiAgICB1c2VyUHJvZmlsZS5zZXRBdmF0YXIoYXZhdGFyKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuLy8gaGFuZGxlclxuXG5mdW5jdGlvbiBoYW5kbGVBc3NpZ25FZGl0SW5wdXQoKSB7XG4gIGNvbnN0IHVzZXJQcm9maWxlRGF0YSA9IHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyh1c2VyUHJvZmlsZURhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJTdWJtaXQoaW5wdXRPYmopIHtcbiAgYXZhdGFyRWRpdFBvcHVwLnNob3dVcGxvYWRpbmdTdGF0ZSgpO1xuICBjb25zdCBhdmF0YXJMaW5rID0gaW5wdXRPYmpbYXZhdGFyTGlua0lucHV0SWRdO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUltYWdlKGF2YXRhckxpbmspXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgIHVzZXJQcm9maWxlLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcbiAgICAgIGF2YXRhckVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNbYXZhdGFyRm9ybUlkXS5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgICBhdmF0YXJFZGl0UG9wdXAucmVzZXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhdmF0YXJFZGl0UG9wdXAuc2hvd1VwbG9hZGVkKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVTdWJtaXQoaW5wdXRPYmopIHtcbiAgY29uc3QgbmFtZUVsID0gaW5wdXRPYmpbZWRpdElucHV0VGl0bGVJZF07XG4gIGNvbnN0IGpvYkVsID0gaW5wdXRPYmpbZWRpdElucHV0RGVzY3JpcHRpb25JZF07XG4gIGVkaXRQb3B1cC5zaG93VXBsb2FkaW5nU3RhdGUoKTtcbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvKHtcbiAgICAgIGVkaXRGb3JtTmFtZUlucHV0OiBuYW1lRWwsXG4gICAgICBlZGl0Rm9ybUFib3V0SW5wdXQ6IGpvYkVsLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7IC8vIGdldCB1c2VyaW5mbyBmcm9tIHNlcnZlciBhbmQgYXBwbHkgdG8gcHJvZmlsZVxuICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XG4gICAgICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRWRpdEZvcm1JZF0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgICAgZWRpdFBvcHVwLnJlc2V0KCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZWRpdFBvcHVwLnNob3dVcGxvYWRlZCgpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRDYXJkKGl0ZW0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcbiAgICBpdGVtLFxuICAgIGNhcmRUZW1wU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKTtcbiAgY29uc3QgY2FyZEl0ZW0gPSBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XG4gIHJldHVybiBjYXJkSXRlbTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChpbnB1dE9iaikge1xuICBjb25zdCBjYXJkTmFtZSA9IGlucHV0T2JqW2FkZENhcmRJbnB1dFRpdGxlSWRdO1xuICBjb25zdCBjYXJkTGluayA9IGlucHV0T2JqW2FkZENhcmRJbnB1dExpbmtJZF07XG4gIGFkZENhcmRQb3B1cC5zaG93VXBsb2FkaW5nU3RhdGUoKTtcbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQoeyBjYXJkRWxlbWVudE5hbWU6IGNhcmROYW1lLCBjYXJkRWxlbWVudExpbms6IGNhcmRMaW5rIH0pXG4gICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgIGFkZENhcmRQb3B1cC5zaG93VXBsb2FkZWQoKTtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdENhcmQoY2FyZCk7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKG5ld0NhcmQpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNbYWRkQ2FyZEZvcm1JZF0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICBhZGRDYXJkUG9wdXAucmVzZXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkUG9wdXAuc2hvd1RvVXBsb2FkKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soeyBuYW1lLCBsaW5rIH0pIHtcbiAgaW1hZ2VJbmZvLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmQpIHtcbiAgY29uc3QgYWN0aW9uUHJvbWlzZSA9IGNhcmQuaXNMaWtlZCgpXG4gICAgPyBhcGkudW5saWtlQ2FyZChjYXJkKVxuICAgIDogYXBpLmxpa2VDYXJkKGNhcmQpO1xuICBhY3Rpb25Qcm9taXNlXG4gICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XG4gICAgICBjYXJkLnNldElzTGlrZWQodXBkYXRlZENhcmQuaXNMaWtlZCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soY2FyZCkge1xuICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xuICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICBkZWxldGVDYXJkUG9wdXAuc2hvd0xvYWRpbmcoKTtcbiAgICBhcGlcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuaWQpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBkZWxldGVDYXJkUG9wdXAuc2hvd0RlbGV0ZWQoKTtcbiAgICAgIH0pO1xuICB9KTtcbn1cblxuLy8gZm9ybSB2YWxpZGF0aW9uXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGZvcm1MaXN0KSA9PiB7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm0pID0+IHtcbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm0pO1xuICAgIGZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm0uZ2V0QXR0cmlidXRlKFwiaWRcIildID0gZm9ybVZhbGlkYXRvcjtcbiAgICByZXR1cm4gZm9ybVZhbGlkYXRvcnM7XG4gIH0pO1xufTtcbi8vIGZ1bmN0aW9uIGNhbGxzIGFuZCBldmVudCBsaXN0ZW5lcnNcblxuYWRkQ2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1thZGRDYXJkRm9ybUlkXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgZm9ybVZhbGlkYXRvcnNbYWRkQ2FyZEZvcm1JZF0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICBhZGRDYXJkUG9wdXAucmVzZXQoKTtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbcHJvZmlsZUVkaXRGb3JtSWRdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBmb3JtVmFsaWRhdG9yc1twcm9maWxlRWRpdEZvcm1JZF0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICBlZGl0UG9wdXAucmVzZXQoKTtcbiAgZWRpdFBvcHVwLm9wZW4oKTtcbiAgaGFuZGxlQXNzaWduRWRpdElucHV0KCk7XG59KTtcbmF2YXRhckVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRWRpdFBvcHVwLnJlc2V0KCk7XG4gIGZvcm1WYWxpZGF0b3JzW2F2YXRhckZvcm1JZF0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZvcm1WYWxpZGF0b3JzW2F2YXRhckZvcm1JZF0uZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICBhdmF0YXJFZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbi8vIHNldEV2ZW50TGlzdGVuZXJzXG5lbmFibGVWYWxpZGF0aW9uKGZvcm1MaXN0KTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZUluZm8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xuICAgIHRoaXMuX2J0blRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG4gIHNob3dMb2FkaW5nKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5pbm5lclRleHQgPSBcIkxvYWRpbmdcIjtcbiAgfVxuICBzaG93RGVsZXRlZCgpIHtcbiAgICB0aGlzLl9zdWJtaXRCdG4uaW5uZXJUZXh0ID0gdGhpcy5fYnRuVGV4dDtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIC8vIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIC8vIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX3BpY1RpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3Blbi1waWMtdGl0bGVcIik7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNvcGVuLXBpYy1pbWFnZVwiKTtcbiAgfVxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fcGljVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdGl0bGU6IHRoaXMuX25hbWVFbC5pbm5lclRleHQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fam9iRWwuaW5uZXJUZXh0LFxuICAgIH07XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lRWwuaW5uZXJUZXh0ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbC5pbm5lclRleHQgPSBqb2I7XG4gIH1cbiAgc2V0QXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLl9hdmF0YXJFbC5zcmMgPSBsaW5rO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBnZXRSZXN1bHQocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuZ2V0UmVzdWx0KTtcbiAgfVxuICB1cGRhdGVVc2VySW5mbyh7IGVkaXRGb3JtTmFtZUlucHV0LCBlZGl0Rm9ybUFib3V0SW5wdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBlZGl0Rm9ybU5hbWVJbnB1dCxcbiAgICAgICAgYWJvdXQ6IGVkaXRGb3JtQWJvdXRJbnB1dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5nZXRSZXN1bHQpO1xuICB9XG4gIGFkZE5ld0NhcmQoeyBjYXJkRWxlbWVudE5hbWUsIGNhcmRFbGVtZW50TGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZEVsZW1lbnROYW1lLFxuICAgICAgICBsaW5rOiBjYXJkRWxlbWVudExpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuZ2V0UmVzdWx0KTtcbiAgfVxuICBkZWxldGVDYXJkKF9pZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7X2lkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLmdldFJlc3VsdCk7XG5cbiAgICAvL3Jlc3BvbnNlIGlzIHtcIm1lc3NhZ2VcIjogXCJUaGlzIHBvc3QgaGFzIGJlZW4gZGVsZXRlZFwifVxuICB9XG5cbiAgbGlrZUNhcmQoY2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZC5pZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5nZXRSZXN1bHQpO1xuICAgIC8vIC50aGVuKChjYXJkKSA9PiB7XG4gICAgLy8gICBjb25zb2xlLmxvZyhjYXJkKTtcbiAgICAvLyB9KTtcbiAgfVxuICB1bmxpa2VDYXJkKGNhcmQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmQuaWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuZ2V0UmVzdWx0KTtcbiAgICAvLyAudGhlbigoY2FyZCkgPT4ge1xuICAgIC8vICAgY29uc29sZS5sb2coY2FyZCk7XG4gICAgLy8gfSk7XG4gIH1cbiAgdXBkYXRlUHJvZmlsZUltYWdlKGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5nZXRSZXN1bHQpO1xuICB9XG4gIGdldENhcmRBbmRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0SW5pdGlhbENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJpZCIsIl9pZCIsIl9jYXJkU2VsZWN0b3IiLCJfZGF0YSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ0biIsIl90cmFzaEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZEltYWdlRWxlbWVudCIsImRlbGV0ZUNhcmQiLCJyZW1vdmUiLCJzZXRJc0xpa2VkIiwiX3JlbmRlckxpa2VzIiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2V0VmlldyIsIl9lbGVtZW50IiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Vycm9yTGlzdCIsImVycm9yTGlzdCIsIl9mb3JtR2V0UmVzZXQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiX2Vycm9yTWVzc2FnZUVsIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbGVtZW50c0FycmF5IiwiQXJyYXkiLCJmcm9tIiwiX2lucHV0RWxzIiwic29tZSIsInRvZ2dsZUJ1dHRvbnN0YXRlIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJyZXNldFZhIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJfY2xpY2tPdmVybGF5IiwidGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VCdG4iLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ0biIsIl9idXR0b25UZXh0IiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0T2JqIiwidmFsdWUiLCJyZXNldCIsInNldElucHV0VmFsdWVzIiwiaW5wdXQiLCJzaG93VXBsb2FkaW5nU3RhdGUiLCJpbm5lclRleHQiLCJzaG93VXBsb2FkZWQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYWRkSW5pdGlhbEl0ZW0iLCJhcHBlbmQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJmb3JtTGlzdCIsImZvcm1TZWxlY3RvciIsImVkaXRJbnB1dFRpdGxlSWQiLCJlZGl0SW5wdXREZXNjcmlwdGlvbklkIiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRDYXJkRm9ybUlkIiwiYXZhdGFyRm9ybUlkIiwicHJvZmlsZUVkaXRGb3JtSWQiLCJjYXJkVGVtcFNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdG4iLCJhZGRDYXJkQnRuIiwiZm9ybVZhbGlkYXRvcnMiLCJhdmF0YXJFZGl0QnRuIiwiY2FyZExpc3QiLCJkZWxldGVDYXJkUG9wdXAiLCJfYnRuVGV4dCIsInNldFN1Ym1pdEFjdGlvbiIsInNob3dMb2FkaW5nIiwic2hvd0RlbGV0ZWQiLCJpbWFnZUluZm8iLCJfcGljVGl0bGUiLCJfaW1hZ2UiLCJ1c2VyUHJvZmlsZSIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsIiwiX2pvYkVsIiwiX2F2YXRhckVsIiwiZ2V0VXNlckluZm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJqb2IiLCJzZXRBdmF0YXIiLCJhZGRDYXJkUG9wdXAiLCJpbnB1dE9iaiIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJhcGkiLCJhZGROZXdDYXJkIiwiY2FyZEVsZW1lbnROYW1lIiwiY2FyZEVsZW1lbnRMaW5rIiwidGhlbiIsImNhcmQiLCJuZXdDYXJkIiwiY3JlYXRDYXJkIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImZpbmFsbHkiLCJzaG93VG9VcGxvYWQiLCJlZGl0UG9wdXAiLCJuYW1lRWwiLCJqb2JFbCIsInVwZGF0ZVVzZXJJbmZvIiwiZWRpdEZvcm1OYW1lSW5wdXQiLCJlZGl0Rm9ybUFib3V0SW5wdXQiLCJyZXMiLCJhYm91dCIsImF2YXRhckVkaXRQb3B1cCIsImF2YXRhckxpbmsiLCJ1cGRhdGVQcm9maWxlSW1hZ2UiLCJhdmF0YXIiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9oZWFkZXJzIiwiZ2V0UmVzdWx0Iiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl9yZWYzIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwiZ2V0Q2FyZEFuZFVzZXJJbmZvIiwiYWxsIiwiYXV0aG9yaXphdGlvbiIsInVwZGF0ZWRDYXJkIiwic2VydmVyQ2FyZExpc3QiLCJzZXJ2ZXJVc2VySW5mbyIsImNhcmRJdGVtIiwidXNlclByb2ZpbGVEYXRhIiwiaGFuZGxlQXNzaWduRWRpdElucHV0IiwiZm9ybSIsImZvcm1WYWxpZGF0b3IiLCJnZXRBdHRyaWJ1dGUiXSwic291cmNlUm9vdCI6IiJ9